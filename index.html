<html>
<head>
  <script src="abcjs_midi_5.8.1-min.js" type="text/javascript"></script>
  <link href="abcjs-midi.css" media="all" rel="stylesheet" type="text/css">
</head>
<body>
  Transpose from C to
<select id="transposeToKey">
</select>
  <button onclick="navigator.clipboard.readText().then((text) => ABCJS.renderAbc('paper', text, {visualTranspose: 5}))">read abc from clipboard</button>
  <button onclick="renderExample()">example</button>
  <div id="paper"></div>
  <div id="midi"></div>

</body>
<script>
function generateTransposeOptions() {
  var transposeMap = {
    "F (up)": 5,
    "F (down)": -7
  };

  var transposeDropdown = document.getElementById('transposeToKey');
  Object.keys(transposeMap).forEach(key => {
    value = transposeMap[key];
    var option = document.createElement('option')
    option.text = key
    option.value = value
    transposeDropdown.appendChild(option);
  })
}

function renderExample() {
  var exampleTune = `X: 33
T:Old Grey Cat
M:4/4
L:1/8
K:EDor
"Em"e2 e2 E3F|GFGA BABc|"D"d2d2 D3E|FAdB AFED|!
"Em"e2e2 E3F|GFGA BABc|"D"dcBA BAGF|"Em"E4 e2:|!
|:"Em"B2e2 e3d|Bdef gfed|"D"A2d2 d3B|ABde fedf|!
"Em"e2B2 "G"g2B2|"A"a2B2 "B"b4a|gfed BABd|"EM"e4 e4:|!`;

  transposeAmount = document.getElementById('transposeToKey').value;
  ABCJS.renderAbc('paper', exampleTune, {visualTranspose: transposeAmount});
}

generateTransposeOptions()
</script>
</html>
